stages:
  - PHP
  - Vagrant
  - Molecule

jobs:
  include:
    - &PHP

      dist: xenial

      cache:
        directories:
          - "$HOME/.composer/cache"

      language: php
  
      php: 7.2

      before_install:
        - phpenv config-rm xdebug.ini
        - composer self-update

      install:
        - composer install --no-interaction --no-progress --no-suggest --prefer-dist --optimize-autoloader

      script:
        - ./bin/phpcs
        - ./bin/phpstan analyse
        - ./bin/phpunit

    - <<: *PHP

      php: 7.3

    - <<: *PHP

      php: 7.4
